{% extends "base.html" %}

{% block content %}
<div class="container mt-5">
    <h2>Order Details - Order #{{ order.order_id }}</h2>
    <p><strong>Order Date:</strong> {{ order.created_at.strftime('%B %d, %Y') }}</p>
    <p><strong>Total Price:</strong> ${{ "%.2f"|format(order.total_price) }}</p>
    <p><strong>Coupon Code:</strong> {{ order.coupon_code or "N/A" }}</p>

    <h4 class="mt-4">Products</h4>
    <table class="table table-bordered">
        <thead>
            <tr>
                <th>Product Name</th>
                <th>Quantity</th>
                <th>Unit Price</th>
                <th>Subtotal</th>
            </tr>
        </thead>
        <tbody>
            {% for item in order_items %}
            <tr>
                <td>{{ item[0] }}</td>
                <td>{{ item[1] }}</td>
                <td>${{ "%.2f"|format(item[2]) }}</td>
                <td>${{ "%.2f"|format(item[1] * item[2]) }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
<!-- Add New Review -->
<h2>Add a New Review</h2>
<form method="POST" action="{{ url_for('reviews.add_review') }}">
 <input type="hidden" name="user_id" value="{{ current_user.id }}">
 <label for="reviewer_type">Reviewer Type:</label>
 <input type="text" name="reviewer_type" id="reviewer_type" required>


 <label for="product_id">Product ID:</label>
 <input type="number" name="product_id" id="product_id" min="0" required>

 <label for="stars">Stars:</label>
 <input type="number" name="stars" id="stars" min="1" max="5" required>


 <label for="review_text">Review Text:</label>
 <textarea name="review_text" id="review_text" rows="3" required></textarea>


 <label for="images">Images (optional):</label>
 <input type="text" name="images" id="images">


 <button type="submit" class="btn btn-primary">Submit Review</button>
</form>
{% endblock %}